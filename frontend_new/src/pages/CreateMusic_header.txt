import React, { useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { Wand2, Upload, ChevronDown } from 'lucide-react';
import Button from '../components/ui/Button';
import VoiceInput from '../components/VoiceInput';
import HandsFreeAssistant from '../components/HandsFreeAssistant';
import api from '../services/api';

const collapseButtonClass = "w-full py-4 px-5 bg-white border-2 hover:border-opacity-80 rounded-2xl flex items-center justify-between transition-all shadow-sm hover:shadow-md group";
const iconBoxClass = "w-10 h-10 rounded-xl flex items-center justify-center transition-colors";

const CreateMusic = () => {
    const navigate = useNavigate();
    const [prompt, setPrompt] = useState('');
    const [loading, setLoading] = useState(false);
    const [showAssistant, setShowAssistant] = useState(false);
    const [selectedTags, setSelectedTags] = useState([]);
    
    // Upload form state (for admin)
    const [showUploadForm, setShowUploadForm] = useState(false);
    const [uploadForm, setUploadForm] = useState({
        title: '',
        lyrics: '',
        tags: '',
        audioFile: null
    });
    const [uploading, setUploading] = useState(false);
    
    // Collapsible sections state
    const [showQuickIdeas, setShowQuickIdeas] = useState(false);
    
    // Check if user is admin
    const userRole = localStorage.getItem('role');
